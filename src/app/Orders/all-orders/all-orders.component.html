<div>
    <div class="pageTitle main2-title">
        רשימת הזמנות
    </div>
    <!--filter table-->
    <div class="page-element width-block-auto">
        <div class="formBorder formElement">
            <form [formGroup] = "filterTableGroup">
                <div class="formWrap">
                    <div class="formWrapRow">
                        <div>
                            <mat-form-field>
                                <mat-label>שם חברה</mat-label>
                                <input matInput placeholder = "" formControlName = "companyName">
                            </mat-form-field>
                        </div>
                        <div>
                            <mat-form-field>
                                <mat-label>מספר הזמנה</mat-label>
                                <input matInput placeholder = "" formControlName = "orderId">
                            </mat-form-field>
                        </div>
                        <div>
                            <mat-form-field appearance="fill" class="datePicker datePickerPadding marginTop-1">
                                <mat-label>מתאריך</mat-label>
                                <input matInput [matDatepicker]="picker" formControlName = "fromData">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div>
                            <mat-form-field appearance="fill" class="datePicker datePickerPadding marginTop-1">
                                <mat-label>עד תאריך</mat-label>
                                <input matInput [matDatepicker]="picker2" formControlName = "untilData">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="formWrapRow">
                        <div>
                            <mat-form-field>
                                <mat-label>סכום טעינה ראשוני</mat-label>
                                <input matInput placeholder = "" formControlName = "initialChargeAmount">
                            </mat-form-field>
                        </div>
                        <div>
                            <mat-form-field>
                                <mat-label>מספר לקוח בקומקס</mat-label>
                                <input matInput placeholder = "" formControlName = "comaxCustomerNumber">
                            </mat-form-field>
                        </div>
                        <div>
                            <mat-form-field>
                                <mat-label>מספר מסמך בקומקס</mat-label>
                                <input matInput placeholder="" formControlName = "comaxFileId">
                            </mat-form-field>
                        </div>
                        <div>
                            <mat-form-field>
                                <mat-label>סטטוס הזמנה</mat-label>
                                <input matInput placeholder = "" formControlName = "orderStatus">
                            </mat-form-field>
                        </div>
                    </div>
                </div>
                <div class="radioGroupWrap">
                    <mat-radio-group
                            aria-labelledby="example-radio-group-label"
                            class="example-radio-group"
                            formControlName = "dateActIssGroup">
                            <mat-radio-button class="radioButton" value="dateIssue">
                                תאריך הנפקה
                            </mat-radio-button>
                            <mat-radio-button class="radioButton" value="dateActivation">
                                תאריך אקטיבציה
                            </mat-radio-button>
                    </mat-radio-group>
                </div>
            </form>
            <div class="buttonsWrap">
                <button mat-button class="linkButton" (click) = "resetForm()">אפס</button>
                <button mat-button class="addButton" (click) = "filterTable()">חפש</button>
            </div>
        </div>
    </div>

    <!--table-->
    <div class="page-element width-block-auto">
        <div>
            <table mat-table [dataSource]="allOrders" class="mat-elevation-z8 tableView" dir="rtl" matSort>
              
                <ng-container *ngFor="let obj of displayedColumns; let i = index;">
                    <ng-container  matColumnDef="{{obj}}" *ngIf="obj != 'delC'">
                        <th mat-header-cell *matHeaderCellDef> {{displayedColumnsHeb[obj] | uppercase}} </th>
                        <td mat-cell  *matCellDef="let element">
                            <span *ngIf="obj == 'orderId' || obj == 'companyName'">
                                <a [routerLink]="['/order',element[obj]]">{{element[obj]}}</a><br>
                            </span>
                            <span *ngIf="obj != 'orderId' && obj != 'companyName'" 
                                [class.tableOrderStatusView] = "obj == 'orderStatus'"
                                [class.tableOrderStatusClose] = "obj == 'orderStatus' && element['orderStatusId'] == 2"
                                [class.tableOrderStatusOpen] = "obj == 'orderStatus' && element['orderStatusId'] == 0"
                                [class.tableOrderStatusWaiting] = "obj == 'orderStatus' && element['orderStatusId'] == 1">
                                {{element[obj]}}
                            </span>
                            <!-- <span *ngIf="obj == 'delC'">test</span> -->
                        </td>
                    </ng-container>
                </ng-container>

                <ng-container matColumnDef="delC">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let element; let rowNum = index;">
                        <div *ngIf="element['orderStatusId'] == 0">
                            <!-- <button mat-icon-button class="deleteButton" (click)="deleteOrder(element)">מחק -->
                                <mat-icon class="deleteIcon" (click)="deleteOrder(element)">delete</mat-icon>
                            <!-- </button> -->
                        </div>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
              
              
        </div>
    </div>
</div>
